var fn_addin = (function (m, $, dependencies) { var addin = addin || {}; addin.styles=addin.styles||{};addin.commands = addin.commands||{};addin.dependencies=dependencies||addin.dependencies||{};addin.styles.style = function(){ return; }; addin.views = addin.views || {}; addin.collect = addin.collect || {}; addin.models = addin.models || {}; addin.templates = addin.templates || {}; addin.info={
	"widget": true,
	"placeholderType": "none",
	"openState": "pomodoro-showing",
	"id": "pomodoro",
	"label": "Pomodoro",
	"addin": "5808a18d-8ff3-4fa0-8ccd-29a6fcf94d5a",
	"dependencies": ["vue"],
	"requiredFeature": "pomodoro"
}
; m.console.log(m.elapsed()+ ': '+addin.info.id+' started'); !function(t){var e={};function o(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=e,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=84)}({0:function(t,e,o){"use strict";function s(t,e,o,s,a,i,n,r){var d,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=o,c._compiled=!0),s&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),n?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},c._ssrRegister=d):a&&(d=r?function(){a.call(this,this.$root.$options.shadowRoot)}:a),d)if(c.functional){c._injectStyles=d;var l=c.render;c.render=function(t,e){return d.call(e),l(t,e)}}else{var m=c.beforeCreate;c.beforeCreate=m?[].concat(m,d):[d]}return{exports:t,options:c}}o.d(e,"a",(function(){return s}))},2:function(t,e,o){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var o=function(t,e){var o=t[1]||"",s=t[3];if(!s)return o;if(e&&"function"==typeof btoa){var a=(n=s,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),i=s.sources.map((function(t){return"/*# sourceURL="+s.sourceRoot+t+" */"}));return[o].concat(i).concat([a]).join("\n")}var n;return[o].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+o+"}":o})).join("")},e.i=function(t,o){"string"==typeof t&&(t=[[null,t,""]]);for(var s={},a=0;a<this.length;a++){var i=this[a][0];null!=i&&(s[i]=!0)}for(a=0;a<t.length;a++){var n=t[a];null!=n[0]&&s[n[0]]||(o&&!n[2]?n[2]=o:o&&(n[2]="("+n[2]+") and ("+o+")"),e.push(n))}},e}},3:function(t,e,o){"use strict";function s(t,e){for(var o=[],s={},a=0;a<e.length;a++){var i=e[a],n=i[0],r={id:t+":"+a,css:i[1],media:i[2],sourceMap:i[3]};s[n]?s[n].parts.push(r):o.push(s[n]={id:n,parts:[r]})}return o}o.r(e),o.d(e,"default",(function(){return u}));var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},n=a&&(document.head||document.getElementsByTagName("head")[0]),r=null,d=0,c=!1,l=function(){},m=null,p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function u(t,e,o,a){c=o,m=a||{};var n=s(t,e);return h(n),function(e){for(var o=[],a=0;a<n.length;a++){var r=n[a];(d=i[r.id]).refs--,o.push(d)}e?h(n=s(t,e)):n=[];for(a=0;a<o.length;a++){var d;if(0===(d=o[a]).refs){for(var c=0;c<d.parts.length;c++)d.parts[c]();delete i[d.id]}}}}function h(t){for(var e=0;e<t.length;e++){var o=t[e],s=i[o.id];if(s){s.refs++;for(var a=0;a<s.parts.length;a++)s.parts[a](o.parts[a]);for(;a<o.parts.length;a++)s.parts.push(v(o.parts[a]));s.parts.length>o.parts.length&&(s.parts.length=o.parts.length)}else{var n=[];for(a=0;a<o.parts.length;a++)n.push(v(o.parts[a]));i[o.id]={id:o.id,refs:1,parts:n}}}}function g(){var t=document.createElement("style");return t.type="text/css",n.appendChild(t),t}function v(t){var e,o,s=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(s){if(c)return l;s.parentNode.removeChild(s)}if(p){var a=d++;s=r||(r=g()),e=w.bind(null,s,a,!1),o=w.bind(null,s,a,!0)}else s=g(),e=y.bind(null,s),o=function(){s.parentNode.removeChild(s)};return e(t),function(s){if(s){if(s.css===t.css&&s.media===t.media&&s.sourceMap===t.sourceMap)return;e(t=s)}else o()}}var f,b=(f=[],function(t,e){return f[t]=e,f.filter(Boolean).join("\n")});function w(t,e,o,s){var a=o?"":s.css;if(t.styleSheet)t.styleSheet.cssText=b(e,a);else{var i=document.createTextNode(a),n=t.childNodes;n[e]&&t.removeChild(n[e]),n.length?t.insertBefore(i,n[e]):t.appendChild(i)}}function y(t,e){var o=e.css,s=e.media,a=e.sourceMap;if(s&&t.setAttribute("media",s),m.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),a&&(o+="\n/*# sourceURL="+a.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}},30:function(t,e,o){var s=o(86);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,o(3).default)("2b7305e6",s,!1,{ssrId:!0})},5:function(t,e){t.exports=Vue},84:function(t,e,o){t.exports=o(98)},85:function(t,e,o){"use strict";var s=o(30);o.n(s).a},86:function(t,e,o){(t.exports=o(2)(!1)).push([t.i,"\n.pomodoro[data-v-40bf475c] { display: block;\n}\n.above-timer[data-v-40bf475c] { position: relative; z-index: -1;\n}\n.button-spacer[data-v-40bf475c] { margin-right: 0 !important; visibility: hidden; pointer-events: none;\n}\n.linear[data-v-40bf475c] { width: 40ch; position: absolute; left: 50%; bottom: 12px; display: none; stroke: white; transform: translateX(-50%);\n}\n.linear-path[data-v-40bf475c], .linear-progress[data-v-40bf475c] { stroke-dasharray: 101;\n}\n.linear-path[data-v-40bf475c] { opacity: 0.6; stroke-width: 1px;\n}\n.linear-progress[data-v-40bf475c] { opacity: 1; transition: 0.2s ease; stroke-width: 4px;\n}\n.circle[data-v-40bf475c] { position: absolute; top: 0; left: 0; bottom: 0; right: 0; z-index: -1; display: flex; justify-content: center; align-items: center;\n}\n.circle-svg[data-v-40bf475c] { --size: 750px; height: var(--size); max-height: 90vh; width: var(--size); fill: none; stroke: white; transform: rotate(-43deg);\n}\n.circle-path[data-v-40bf475c], .circle-progress[data-v-40bf475c] { stroke-dasharray: 283;\n}\n.circle-path[data-v-40bf475c] { stroke-dashoffset: -73%; opacity: 0.6; stroke-width: 0.5px;\n}\n.circle-progress[data-v-40bf475c] { opacity: 1; stroke-width: 1.31px; transition: 0.2s ease;\n}\n.time[data-v-40bf475c] { display: grid; grid-template-columns: 1fr max-content 1fr; cursor: pointer;\n}\n.time .minutes[data-v-40bf475c] { text-align: right;\n}\n.time .colon[data-v-40bf475c] {\n}\n.time .seconds[data-v-40bf475c] { text-align: left;\n}\n.progress-container[data-v-40bf475c] {\n}\n.progress-bar[data-v-40bf475c], .progress[data-v-40bf475c] { height: 6px; width: 100%; background: rgba(255,255,255,0.5); border-radius: 6px;\n}\n.progress[data-v-40bf475c] { width: 0%; background: white; text-align: left; transition: 0.2s ease;\n}\n.dropdown[data-v-40bf475c] { --padding: calc(var(--app-padding) - 6px); width: 200px; margin-top: 1px; top: 38px; z-index: 2;\n}\n.dropdown .header[data-v-40bf475c] { height: auto; padding: 12px var(--padding) 4px;\n}\n.dropdown .header .badge[data-v-40bf475c] { margin-left: 8px;\n}\n.dropdown-metrics[data-v-40bf475c] { margin: -5px 0; display: flex; justify-content: space-between;\n}\n.dropdown-metric[data-v-40bf475c] { min-width: max-content; width: 48%; margin-top: -2px; margin-right: 12px;\n}\n.dropdown-metric-stat[data-v-40bf475c] { opacity: 0.9; font-size: 21px; letter-spacing: -0.3px;\n}\n.dropdown-metric-label[data-v-40bf475c] { opacity: 0.5; font-size: 12px;\n}\n.dropdown-back[data-v-40bf475c] {\n}\n.dropdown-back-icon[data-v-40bf475c] { margin-top: -1px; opacity: 0.55; font-size: 13px;\n}\n.dropdown-list .has-input[data-v-40bf475c] { justify-content: space-between;\n}\n.dropdown-list .has-input input[data-v-40bf475c] { width: 3ch; margin: -2px 0; padding: 0 1px 2px; text-align: right;\n}\n.dropdown-list-input-unit[data-v-40bf475c] { margin-left: 4px; opacity: 0.75; font-size: 13px;\n}\n.dropdown-list li[data-v-40bf475c] { font-size: 0.875rem;\n}\n.dropdown-list li.disabled[data-v-40bf475c] { opacity: 0.5; pointer-events: none;\n}\n\n\t\t\t/* Hide silly up/down controls on input type=number */\n.hide-controls[data-v-40bf475c]::-webkit-outer-spin-button, .hide-controls[data-v-40bf475c]::-webkit-inner-spin-button { -webkit-appearance: none;\n}\ninput[type=number].hide-controls[data-v-40bf475c] { -moz-appearance: textfield;\n}\n.greeting[data-v-40bf475c] { font-size: 337.5%; justify-content: center;\n}\n.button-row[data-v-40bf475c], .button-spacer[data-v-40bf475c] { margin-top: 14px; text-align: center;\n}\n.button[data-v-40bf475c] { margin-right: 10px; padding: 6px 23px 7px; display: inline-flex; opacity: 0; background: rgba(0,0,0,0.2); border-radius: 50px; border: 2px solid #fff; box-shadow: 0 0 12px rgba(0,0,0,0.25); color: #fff; cursor: pointer; font-size: 0.875rem; font-weight: 500; outline: 0;\n}\n.button.disabled[data-v-40bf475c] { visibility: hidden;\n}\n.button[data-v-40bf475c]:hover { background: rgba(255,255,255,0.03);\n}\n.button[data-v-40bf475c]:hover:active { background: rgba(255,255,255,0.2); transform: translateY(1px); transition-duration: 0s;\n}\n.center:hover .button[data-v-40bf475c] { opacity: 1;\n}\n.review[data-v-40bf475c] { display: none;\n}\n\n\n\t/* Animation */\n.fade-enter-active[data-v-40bf475c], .fade-leave-active[data-v-40bf475c] { transition: opacity .5s;\n}\n.fade-enter[data-v-40bf475c], .fade-leave-to[data-v-40bf475c] { opacity: 0;\n}\n@media screen and (max-height: 600px) {\n.linear[data-v-40bf475c] { display: block;\n}\n.circle[data-v-40bf475c] { display: none;\n}\n.button-row[data-v-40bf475c], .button-spacer[data-v-40bf475c] { margin-top: 8px;\n}\n.button[data-v-40bf475c] { padding: 4px 18px 5px; font-size: .875rem\n}\n}\n\n",""])},98:function(t,e,o){"use strict";o.r(e);var s=o(5),a=o.n(s),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"fade"},on:{"before-enter":t.beforeEnter,"after-leave":t.afterLeave}},[t.showPomo?o("section",{staticClass:"clock pomodoro app-container has-dash-icon",class:{running:t.started},attrs:{"data-test":"pomodoro"}},[o("div",{staticClass:"above-timer"},[o("svg",{staticClass:"linear",attrs:{viewBox:"0 0 100 2",xmlns:"http://www.w3.org/2000/svg"}},[o("line",{staticClass:"linear-path",attrs:{x1:"0",y1:"1",x2:"100",y2:"1"}}),t._v(" "),o("line",{staticClass:"linear-progress",attrs:{x1:"0",y1:"0",x2:"100",y2:"0","stroke-dashoffset":t.dashProgressLine}})]),t._v(" "),o("div",{staticClass:"button button-spacer"},[t._v("Placeholder")])]),t._v(" "),o("div",{staticClass:"circle"},[o("svg",{staticClass:"circle-svg",attrs:{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"}},[o("path",{staticClass:"circle-path",attrs:{d:"M 50, 50 m -45, 0 a 45,45 0 1,0 90,0 a 45,45 0 1,0 -90,0"}}),t._v(" "),o("path",{staticClass:"circle-progress",attrs:{d:"M 50, 50 m -45, 0 a 45,45 0 1,0 90,0 a 45,45 0 1,0 -90,0","stroke-dashoffset":t.dashProgressCircle}})])]),t._v(" "),o("div",{staticClass:"time-wrapper has-centered-3-col"},[o("div",{staticClass:"side-col"}),t._v(" "),o("div",{staticClass:"time center-col",attrs:{"data-test":"timer"},on:{click:t.togglePlay}},[o("div",{staticClass:"minutes",attrs:{"data-test":"minutes"}},[t._v(t._s(t.minutes))]),t._v(" "),o("div",{staticClass:"colon"},[t._v(":")]),t._v(" "),o("div",{staticClass:"seconds",attrs:{"data-test":"seconds"}},[t._v(t._s(t.seconds))])]),t._v(" "),o("div",{staticClass:"side-col"},[o("span",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeDropdown,expression:"closeDropdown"}],staticClass:"more more-dash",class:{active:t.showDropdown},attrs:{"data-test":"more-container"}},[o("div",{staticClass:"icon-wrapper dash-icon-wrapper more-toggle",attrs:{"data-test":"more-toggle"},on:{click:function(e){t.showDropdown=!t.showDropdown}}},[o("svg",{staticClass:"icon dash-icon more-icon icon-ellipsis",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 60 60"}},[o("path",{attrs:{d:"M8 22c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zM52 22c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8zM30 22c-4.411 0-8 3.589-8 8s3.589 8 8 8 8-3.589 8-8-3.589-8-8-8z"}})])]),t._v(" "),o("div",{staticClass:"app dropdown more-dropdown dash-dropdown nipple nipple-top-left"},[t.showSettings?t._e():o("div",{staticClass:"dropdown-main"},[o("header",{staticClass:"header"},[o("div",{staticClass:"title-wrapper"},[o("svg",{staticClass:"app-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[o("path",{attrs:{d:"M196 40h120a20 20 0 0 0 0-40H196a20 20 0 0 0 0 40zm116.569 167.147l-70.71 70.71a20 20 0 1 0 28.284 28.284l70.71-70.71a20 20 0 1 0-28.284-28.284z"}}),o("path",{attrs:{d:"M256 72a220 220 0 1 0 220 220A219.881 219.881 0 0 0 256 72zm0 400c-99.252 0-180-80.748-180-180s80.748-180 180-180 180 80.748 180 180-80.748 180-180 180z"}})]),t._v(" "),o("span",{staticClass:"title"},[t._v("Pomodoro")]),t._v(" "),o("span",{staticClass:"badge beta-badge"},[t._v("Beta")])])]),t._v(" "),o("ul",{staticClass:"dropdown-list"},[o("li",{staticClass:"line"}),t._v(" "),o("li",{class:{disabled:t.disableReset},attrs:{"data-test":"reset-toggle"},on:{click:t.reset}},[o("span",{staticClass:"dropdown-list-label"},[t._v("Reset timer")])]),t._v(" "),o("li",{attrs:{"data-test":"complete-toggle"},on:{click:t.complete}},[o("span",{staticClass:"dropdown-list-label"},[t._v("Complete timer")])]),t._v(" "),o("li",{staticClass:"line"}),t._v(" "),o("li",{attrs:{"data-test":"feedback-toggle"},on:{click:t.openFeedback}},[o("span",{staticClass:"dropdown-list-label"},[t._v("Feedback")])]),t._v(" "),t.started?t._e():o("li",{attrs:{"data-test":"settings-toggle"},on:{click:function(e){t.showSettings=!0}}},[o("span",{staticClass:"dropdown-list-label"},[t._v("Settings")])]),t._v(" "),o("li",{staticClass:"line"}),t._v(" "),o("li",{attrs:{"data-test":"pomodoro-close"},on:{click:t.closePomodoro}},[o("span",{staticClass:"dropdown-list-label"},[t._v("Close Pomodoro")])])])]),t._v(" "),t.showSettings?o("div",{staticClass:"settings",attrs:{"data-test":"settings"}},[o("ul",{staticClass:"dropdown-list"},[o("li",{staticClass:"dropdown-back",attrs:{"data-test":"back"},on:{click:t.closeSettings}},[o("span",{staticClass:"dropdown-list-icon-wrapper"},[o("i",{staticClass:"icon icon-left dropdown-list-icon dropdown-back-icon"})]),t._v(" "),o("span",{staticClass:"dropdown-list-label"},[t._v("Back")])]),t._v(" "),o("li",{staticClass:"line"}),t._v(" "),o("li",{staticClass:"has-toggle",class:{on:t.autoplay},attrs:{title:"Automatically play the next timer when one completes.","data-test":"auto-play"},on:{click:function(e){t.autoplay=!t.autoplay}}},[o("span",{staticClass:"dropdown-list-label"},[t._v("Autoplay")]),t._v(" "),o("span",{staticClass:"toggle-slider"},[o("svg",{staticClass:"toggle-switch",attrs:{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"}},[o("circle",{attrs:{cx:"50",cy:"50",r:"50"}})])])]),t._v(" "),o("li",{staticClass:"line"}),t._v(" "),o("li",{staticClass:"has-input no-hover"},[o("span",{staticClass:"dropdown-list-label"},[t._v("Focus length")]),t._v(" "),o("span",{staticClass:"input-wrapper"},[o("input",{staticClass:"hide-controls",attrs:{type:"number",name:"focusDuration",max:"60",min:"1","data-test":"focus-input"},domProps:{value:t.$options.timers.focus.minutes},on:{input:function(e){return t.setTimerDuration("focus",e.target.value)}}}),o("span",{staticClass:"dropdown-list-input-unit"},[t._v("min")])])]),t._v(" "),o("li",{staticClass:"has-input no-hover"},[o("span",{staticClass:"dropdown-list-label"},[t._v("Rest length")]),t._v(" "),o("span",{staticClass:"input-wrapper"},[o("input",{staticClass:"hide-controls",attrs:{type:"number",name:"restDuration",max:"60",min:"1","data-test":"rest-input"},domProps:{value:t.$options.timers.rest.minutes},on:{input:function(e){return t.setTimerDuration("rest",e.target.value)}}}),o("span",{staticClass:"dropdown-list-input-unit"},[t._v("min")])])])])]):t._e()])])])]),t._v(" "),o("transition",{attrs:{name:"fade",mode:"out-in"}},[o("div",{key:t.message,staticClass:"greeting",attrs:{"data-test":"message"}},[t._v("\n\t\t\t\t"+t._s(t.message)+"\n\t\t\t")])]),t._v(" "),o("div",{staticClass:"button-row"},[o("button",{staticClass:"button",class:{disabled:t.isInTransition},attrs:{"data-test":"start-stop-button"},on:{click:t.togglePlay}},[t._v(t._s(t.started?"Stop":"Start"))])]),t._v(" "),o("div",{staticClass:"review"},[o("h3",[t._v("Completed")]),t._v(" "),t._l(t.completedTimers,(function(e,s){return o("div",{key:s},[t._v("\n\t\t\t\t"+t._s(e.name)+" • "+t._s(e.time)+" •  "+t._s(e.duration)+" seconds\n\t\t\t")])}))],2)],1):t._e()])};i._withStripped=!0;var n={name:"Pomodoro",timers:{focus:{name:"Focus",minutes:Number(localStorage.getItem("pomodoro-focus-duration"))||25,startMessage:"Time to focus."},rest:{name:"Rest",minutes:Number(localStorage.getItem("pomodoro-rest-duration"))||5,startMessage:"Take a break."}},data:()=>({showPomo:!1,showCircle:!0,started:!1,showDropdown:!1,showSettings:!1,autoplay:!1,activeTimerId:"focus",message:"",timeRemaining:0,interval:1e3,expectedTimerEnd:0,timer:null,completedTimers:[],isInTransition:!1}),created(){window.addEventListener("storage",this.handleStorageChangeForStartedPomodoro.bind(this),!1),this.eventBus=_.extend(this,Backbone.Events),this.eventBus.listenTo(m,"pomodoro:show",this.showPomodoro),"true"===localStorage.getItem("pomodoro-running")||localStorage.getItem("pomodoro-showing")?(this.activeTimerId=localStorage.getItem("pomodoro-started"),this.expectedTimerEnd=Number(localStorage.getItem("pomodoro-started-expected-timer-end")),this.timeRemaining=Math.floor((this.expectedTimerEnd-Date.now())/1e3)):this.setCountdownTimer(),localStorage.getItem("pomodoro-autoplay")&&(this.autoplay="true"===localStorage.getItem("pomodoro-autoplay"))},mounted(){"true"===localStorage.getItem("pomodoro-running")||localStorage.getItem("pomodoro-showing")?(m.trigger("pomodoro:show"),this.timeRemaining>0?"true"===localStorage.getItem("pomodoro-running")?(this.message=this.activeTimer.name,this.started=!0,this.timeOutForCountdown()):(this.timeRemaining=Number(localStorage.getItem("pomodoro-time-remaining")),this.setTimerMessage()):(localStorage.setItem("pomodoro-running",!1),this.setTimer(this.activeTimerId),this.setTimerMessage())):(localStorage.setItem("pomodoro-started",this.activeTimerId),this.removeAllPomodoroLocalStorageKeys(),this.message=this.activeTimer.startMessage)},destroyed(){window.removeEventListener("storage",this.handleStorageChangeForStartedPomodoro.bind(this),!1),clearTimeout(this.timer)},computed:{activeTimer(){return this.$options.timers[this.activeTimerId]},minutes(){if(3600===this.timeRemaining)return 60;let t=Math.trunc(this.timeRemaining/60)%60;return t<10&&(t="0"+t),t},seconds(){let t=this.timeRemaining%60;return t<10&&(t="0"+t),t},dashProgressCircle(){const t=60*this.activeTimer.minutes;return 210*(1-this.timeRemaining/t)-283+"%"},dashProgressLine(){const t=60*this.activeTimer.minutes;return 143*this.timeRemaining/t+"%"},disableReset(){return this.timeRemaining===60*this.activeTimer.minutes}},watch:{timeRemaining(){this.showPomo&&(document.title=`${this.minutes}:${this.seconds} ${this.activeTimer.name} - Momentum`,0===this.timeRemaining&&(this.message="Done!",this.autoplay?setTimeout(()=>{"focus"===this.activeTimerId?this.setTimer("rest"):this.setTimer("focus"),this.isInTransition=!1,this.start()},1500):setTimeout(()=>{"focus"===this.activeTimerId?this.setTimer("rest"):this.setTimer("focus"),this.message=this.activeTimer.startMessage,this.isInTransition=!1},1500)))},autoplay(){localStorage.setItem("pomodoro-autoplay",this.autoplay),m.sendEvent("pomodoro",`autoplay-${this.autoplay}`)}},methods:{countdown(){this.calculateTimeRemaining(),this.timeRemaining<=0||this.timeOutForCountdown()},timeOutForCountdown(){const t=new Date,e=this.interval-t.getMilliseconds()+10;this.timer=setTimeout(this.countdown,e)},calculateTimeRemaining(){if(this.timeRemaining>0&&(this.timeRemaining=Math.floor((this.expectedTimerEnd-Date.now())/1e3)),this.timeRemaining<=0)return this.complete()},togglePlay(){!0===this.started?(new Audio("sounds/pomo-stop.mp3").play(),this.stop()):(new Audio("sounds/pomo-start.mp3").play(),this.start())},complete(){this.isInTransition=!0,this.completedTimers.push({type:this.activeTimer.name,time:new Date,duration:60*this.activeTimer.minutes}),new Audio("sounds/pomo-done.mp3").play(),this.timeRemaining=0,this.stop(),localStorage.setItem("pomodoro-completed",!0),m.sendEvent("pomodoro","completed")},reset(){this.setCountdownTimer(),this.stop(),localStorage.setItem("pomodoro-reset",!0),m.sendEvent("pomodoro","reset")},start(){this.clearStartedTimeout(),this.started=!0,this.message=this.activeTimer.name,this.expectedTimerEnd=Date.now()+1e3*this.timeRemaining,localStorage.removeItem("pomodoro-time-remaining"),localStorage.setItem("pomodoro-running",!0),localStorage.setItem("pomodoro-started-expected-timer-end",this.expectedTimerEnd),this.timeOutForCountdown(),m.sendEvent("pomodoro","started")},stop(){this.clearStartedTimeout(),localStorage.setItem("pomodoro-running",!1),localStorage.setItem("pomodoro-time-remaining",this.timeRemaining),m.sendEvent("pomodoro","stopped")},setTimer(t){this.activeTimerId=t,localStorage.setItem("pomodoro-started",this.activeTimerId),this.setCountdownTimer(),this.setTimerMessage()},setCountdownTimer(){this.timeRemaining=60*this.activeTimer.minutes,localStorage.removeItem("pomodoro-started-expected-timer-end"),localStorage.removeItem("pomodoro-time-remaining")},setTimerDuration(t,e){e>60?this.$options.timers[t].minutes=60:e&&""!==e&&e<=0?this.$options.timers[t].minutes=1:e&&""!==e&&(this.$options.timers[t].minutes=e),localStorage.setItem(`pomodoro-${t}-duration`,this.$options.timers[t].minutes),this.setTimerWhenNotStarted(t),m.sendEvent("pomodoro",`${t}-duration-change-${e}`)},setTimerWhenNotStarted(t){this.started||this.activeTimerId!==t||(this.timeRemaining=60*this.$options.timers[t].minutes)},closeDropdown(){this.showDropdown=!1,this.showSettings=!1},closePomodoro(){this.closeDropdown(),this.stop(),this.showPomo=!1,m.trigger("pomodoro:hide"),localStorage.setItem("pomodoro-closed",!0),document.title="New Tab",this.removeAllPomodoroLocalStorageKeys(),this.resetPomodoroState(),this.removeAllPomodoroLocalStorageKeys(),m.sendEvent("pomodoro","closed")},closeSettings(){this.showSettings=!1},beforeEnter(){document.body.classList.add("has-pomodoro")},afterLeave(){m.models.customization.getComputedSetting("clockVisible")&&$(".app-container.center-clock").mFadeIn(),$(".app-container.greeting").mFadeIn(),document.body.classList.remove("has-pomodoro")},showPomodoro(){$(".app-container.greeting").mFadeOut(),$(".app-container.center-clock").mFadeOut(500,!1,()=>{this.showPomo=!0,m.sendEvent("pomodoro","open"),localStorage.setItem("pomodoro-showing",!0)})},handleStorageChangeForStartedPomodoro(t){switch(t.key){case"pomodoro-running":if(null===t.newValue)return;"true"===t.newValue?(this.clearStartedTimeout(),this.started=!0,this.message=this.activeTimer.name,this.expectedTimerEnd=Date.now()+1e3*this.timeRemaining,this.timeOutForCountdown()):this.clearStartedTimeout();break;case"pomodoro-completed":if(null===t.newValue)return;this.isInTransition=!0,this.timeRemaining=0,this.clearStartedTimeout(),localStorage.removeItem("pomodoro-completed");break;case"pomodoro-reset":if(null===t.newValue)return;this.setCountdownTimer(),this.clearStartedTimeout(),localStorage.removeItem("pomodoro-reset");break;case"pomodoro-closed":if(null===t.newValue)return;this.showPomo=!1,m.trigger("pomodoro:hide"),document.title="New Tab",this.resetPomodoroState(),this.removeAllPomodoroLocalStorageKeys();break;case"pomodoro-showing":"true"===t.newValue&&(m.trigger("pomodoro:show"),this.showPomodoro());break;case"pomodoro-focus-duration":if(isNaN(t.newValue)||null===t.newValue)return;this.$options.timers.focus.minutes=Number(t.newValue),this.setTimerWhenNotStarted("focus");break;case"pomodoro-rest-duration":if(isNaN(t.newValue)||null===t.newValue)return;this.$options.timers.rest.minutes=Number(t.newValue),this.setTimerWhenNotStarted("rest");break;case"pomodoro-autoplay":if(null===t.newValue)return;this.autoplay="true"===t.newValue}},clearStartedTimeout(){this.started=!1,clearTimeout(this.timer)},setTimerMessage(){this.message=this.activeTimer.startMessage},resetPomodoroState(){this.activeTimerId="focus",localStorage.setItem("pomodoro-started",this.activeTimerId),this.setCountdownTimer(),this.setTimerMessage(),this.clearStartedTimeout()},openFeedback(){m.sendEvent("pomodoro","feedback");const t={type:"Pomodoro",email:localStorage.getItem("email")||"",name:m.models.customization.get("displayname")};let e=encodeURIComponent(t.email);window.open(`https://momentumdash.com/contact?type=${t.type}&email=${e}&name=${t.name}`)},removeAllPomodoroLocalStorageKeys(){["pomodoro-showing","pomodoro-reset","pomodoro-completed","pomodoro-running","pomodoro-closed","pomodoro-time-remaining","pomodoro-started-expected-timer-end"].forEach(t=>{localStorage.removeItem(t)})}}},r=(o(85),o(0)),d=Object(r.a)(n,i,[],!1,null,"40bf475c",null);d.options.__file="source/addins-vue/pomodoro/Pomodoro.vue";var c=d.exports;const l={};a.a.directive("click-outside",{bind:function(t,e){let o,s;t.dataset.justBoundClickOutsideHandler=!0,setTimeout(()=>{t.dataset.justBoundClickOutsideHandler=!1},100);const a=t=>{s=!1,(t=>t&&t.clientX>window.innerWidth)(t)?s=!0:o=t.target},i=a=>{s||(e.modifiers.bubble||!t.contains(o)&&!t.contains(a.target)&&t!==o&&t!==a.target&&"true"!==t.dataset.justBoundClickOutsideHandler)&&e.value(a)};t.dataset.clickOutsideMouseupHandlerId=Math.random().toString(36).substring(7),t.dataset.clickOutsideMousedownHandlerId=Math.random().toString(36).substring(7),l[t.dataset.clickOutsideMouseupHandlerId]=i,l[t.dataset.clickOutsideMousedownHandlerId]=a,document.addEventListener("mouseup",i),document.addEventListener("mousedown",a)},unbind:function(t){document.removeEventListener("mouseup",l[t.dataset.clickOutsideMouseupHandlerId]),document.removeEventListener("mousedown",l[t.dataset.clickOutsideMousedownHandlerId]),delete l[t.dataset.clickOutsideMouseupHandlerId],delete l[t.dataset.clickOutsideMousedownHandlerId],delete t.dataset.clickOutsideMouseupHandlerId,delete t.dataset.clickOutsideMousedownHandlerId,delete t.dataset.justBoundClickOutsideHandler}});const p=document.querySelector(".center"),u=document.createElement("div");p.appendChild(u),new a.a({render:t=>t(c)}).$mount(u)}});
//# sourceMappingURL=main.js.map
;return addin; }); if(m.addinManager) {m.addinManager.registerAddinFn("5808a18d-8ff3-4fa0-8ccd-29a6fcf94d5a", fn_addin);}