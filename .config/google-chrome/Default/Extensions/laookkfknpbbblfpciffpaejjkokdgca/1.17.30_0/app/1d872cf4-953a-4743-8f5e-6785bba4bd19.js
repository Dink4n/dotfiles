var fn_addin=function(d,i,t){var l=l||{};return l.styles=l.styles||{},l.commands=l.commands||{},l.dependencies=t||l.dependencies||{},l.styles.style=function(){},l.views=l.views||{},l.collect=l.collect||{},l.models=l.models||{},l.templates=l.templates||{},l.info={widget:!0,placeholderType:"none",id:"settings",dependencies:["settings_common"],addin:"1d872cf4-953a-4743-8f5e-6785bba4bd19",commands:["settings.initialize","settings.display"],elementId:"settings",class:"app-container settings",label:"Settings",appClass:"settings-app",region:"bottom-left",order:"prepend",width:500,height:400,toggleEvent:"globalEvent:key:L",closeOnEsc:"true"},d.console.log(d.elapsed()+": "+l.info.id+" started"),l.templates=l.templates||{},l.templates.about=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,s){var i;return'<img src="img/logo.svg" class="logo logo-color">\n<img src="img/logo-white.svg" class="logo logo-white">\n<h3>Momentum</h3>\n<p class="made">Personal Dashboard <span id="momo-version">v'+this.escapeExpression("function"==typeof(i=null!=(i=e.version||(null!=t?t.version:t))?i:e.helperMissing)?i.call(t,{name:"version",hash:{},data:s}):i)+'</span></p>\n<p class="thanks">Thank you for your support!</p>\n<p class="links">\n\t<a href="http://momentumdash.com/help" target="_blank">Feedback</a>\n\t<a href="http://momentumdash.com" target="_blank">Website</a>\n\t<a href="http://momentumdash.com/blog" target="_blank">Blog</a>\n\t<a href="http://www.instagram.com/momentumdash" target="_blank">Instagram</a>\n\t<a href="https://www.facebook.com/momentumdash" target="_blank">Facebook</a>\n\t<a href="https://twitter.com/momentumdash" target="_blank">Twitter</a>\n</p>\n<div class="footer">\n\t<span class="footer-made">Made with <span class="heart">&#9829;</span> in beautiful BC, Canada</span><span class="separator">ãƒ»</span><span class="footer-links"><a href="https://momentumdash.com/policies">Terms &amp; Privacy</a></span>\n</div>\n'},useData:!0}),l.templates["color-picker-popup"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,s){return'<div class="cp-color-picker nipple nipple-bottom-right">\n    <div class="cp-xy-slider">\n        <div class="cp-white"></div>\n        <div class="cp-xy-cursor"></div>\n    </div>\n    <div class="cp-z-slider">\n        <div class="cp-z-cursor"></div>\n    </div>\n    <div class="cp-alpha-container">\n        <div class="cp-alpha">\n            <div class="cp-alpha-cursor"></div>\n        </div>\n    </div>\n</div>\n'},useData:!0}),l.templates["color-picker"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,s){return'<div class="swatch-container"><div class="swatch" style="background: #222;"></div></div>'},useData:!0}),l.templates.connect=Handlebars.template({1:function(t,e,n,s){return"GitHub"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,s){var i,a,l=e.helperMissing,o="function",r=this.escapeExpression;return'<span class="icon-wrapper back" title="Back"><i class="icon icon-left"></i></span>\n\n<section class="provider">\n\t<div class="provider-logo-box">\n\t\t<img  src="'+r(typeof(a=null!=(a=e.large_icon_url||(null!=t?t.large_icon_url:t))?a:l)==o?a.call(t,{name:"large_icon_url",hash:{},data:s}):a)+'" class="provider-logo '+(null!=(i=e.if.call(t,null!=t?t.GitHub:t,{name:"if",hash:{},fn:this.program(1,s,0),inverse:this.noop,data:s}))?i:"")+'">\n\t</div>\n\t<h2 class="provider-title">Connect to '+r(typeof(a=null!=(a=e.provider_title||(null!=t?t.provider_title:t))?a:l)==o?a.call(t,{name:"provider_title",hash:{},data:s}):a)+'</h2>\n</section>\n\x3c!--<section class="extra-info">--\x3e\n\t\x3c!--<label for="blah">Please enter your account name</label>--\x3e\n\t\x3c!--<input type="text" name="blah" id="blah" class="input">--\x3e\n\x3c!--</section>--\x3e\n\n<p class="description">A secure window will open.</p>\n<section class="button-group">\n\t<span id="connect-button" class="button">Connect</span>\n\t<p class="description">Momentum won\'t ever have access to your login information.</p>\n</section>\n'},useData:!0}),l.templates["general-toggle-options"]=Handlebars.template({1:function(t,e,n,s){return'<span class="badge plus-badge">PLUS</span>'},3:function(t,e,n,s,i,a){var l;return null!=(l=e.unless.call(t,s&&s.last,{name:"unless",hash:{},fn:this.program(4,s,0,i,a),inverse:this.program(9,s,0,i,a),data:s}))?l:""},4:function(t,e,n,s,i,a){var l,o,r=this.lambda,c=this.escapeExpression,d=e.helperMissing,h="function";return'\t\t\t\t<span class="toggle-option '+c(r(null!=a[2]?a[2].widget:a[2],t))+'" data-related-widget="'+c(r(null!=a[2]?a[2].widget:a[2],t))+'" data-option-value='+c(typeof(o=null!=(o=e.value||(null!=t?t.value:t))?o:d)==h?o.call(t,{name:"value",hash:{},data:s}):o)+'><div class="sub-view"></div>'+c(typeof(o=null!=(o=e.label||(null!=t?t.label:t))?o:d)==h?o.call(t,{name:"label",hash:{},data:s}):o)+"</span>"+(null!=(l=e.if.call(t,null!=t?t.breakafter:t,{name:"if",hash:{},fn:this.program(5,s,0,i,a),inverse:this.program(7,s,0,i,a),data:s}))?l:"")+"\n"},5:function(t,e,n,s){return"<br>"},7:function(t,e,n,s){return' <span class="toggle-divider">|</span> '},9:function(t,e,n,s,i,a){var l,o=this.lambda,r=this.escapeExpression,c=e.helperMissing,d="function";return'\t\t\t\t<span class="toggle-option '+r(o(null!=a[2]?a[2].widget:a[2],t))+'" data-related-widget="'+r(o(null!=a[2]?a[2].widget:a[2],t))+'" data-option-value='+r(typeof(l=null!=(l=e.value||(null!=t?t.value:t))?l:c)==d?l.call(t,{name:"value",hash:{},data:s}):l)+'><div class="sub-view"></div>'+r(typeof(l=null!=(l=e.label||(null!=t?t.label:t))?l:c)==d?l.call(t,{name:"label",hash:{},data:s}):l)+"</span>\n"},11:function(t,e,n,s){var i;return'<span class="option-message">'+this.escapeExpression("function"==typeof(i=null!=(i=e.message||(null!=t?t.message:t))?i:e.helperMissing)?i.call(t,{name:"message",hash:{},data:s}):i)+"</span>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,s,i,a){var l,o,r=e.helperMissing,c="function",d=this.escapeExpression;return'<li class="slide-toggle has-toggle" data-related-widget="'+d(typeof(o=null!=(o=e.widget||(null!=t?t.widget:t))?o:r)==c?o.call(t,{name:"widget",hash:{},data:s}):o)+'" data-test="'+d(typeof(o=null!=(o=e.dataId||(null!=t?t.dataId:t))?o:r)==c?o.call(t,{name:"dataId",hash:{},data:s}):o)+'">\n\t<span class="setting-name">'+d(typeof(o=null!=(o=e.name||(null!=t?t.name:t))?o:r)==c?o.call(t,{name:"name",hash:{},data:s}):o)+"</span>\n\t"+(null!=(l=e.if.call(t,null!=t?t.plusOnly:t,{name:"if",hash:{},fn:this.program(1,s,0,i,a),inverse:this.noop,data:s}))?l:"")+'\n\t<span class="toggle-options">\n'+(null!=(l=e.each.call(t,null!=t?t.options:t,{name:"each",hash:{},fn:this.program(3,s,0,i,a),inverse:this.noop,data:s}))?l:"")+"\t</span>\n\t"+(null!=(l=e.if.call(t,null!=t?t.message:t,{name:"if",hash:{},fn:this.program(11,s,0,i,a),inverse:this.noop,data:s}))?l:"")+'\n\t<div class="option-clear"></div>\n</li>\n'},useData:!0,useDepths:!0}),l.templates["general-toggle-slider"]=Handlebars.template({1:function(t,e,n,s){return'<span class="badge plus-badge">PLUS</span>'},3:function(t,e,n,s){return'<span class="badge beta-badge">Preview</span>'},5:function(t,e,n,s){var i;return'<span class="option-message">'+this.escapeExpression("function"==typeof(i=null!=(i=e.message||(null!=t?t.message:t))?i:e.helperMissing)?i.call(t,{name:"message",hash:{},data:s}):i)+"</span>"},7:function(t,e,n,s){var i;return'<span class="config-button">'+this.escapeExpression("function"==typeof(i=null!=(i=e.configLabel||(null!=t?t.configLabel:t))?i:e.helperMissing)?i.call(t,{name:"configLabel",hash:{},data:s}):i)+"</span>"},9:function(t,e,n,s){var i;return'<span class="nicknames-config">'+this.escapeExpression("function"==typeof(i=null!=(i=e.nicknameConfigLabel||(null!=t?t.nicknameConfigLabel:t))?i:e.helperMissing)?i.call(t,{name:"nicknameConfigLabel",hash:{},data:s}):i)+"</span>"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,s){var i,a,l=e.helperMissing,o="function",r=this.escapeExpression;return'<li class="slide-toggle has-toggle" data-related-widget="'+r(typeof(a=null!=(a=e.widget||(null!=t?t.widget:t))?a:l)==o?a.call(t,{name:"widget",hash:{},data:s}):a)+'" data-test="'+r(typeof(a=null!=(a=e.dataId||(null!=t?t.dataId:t))?a:l)==o?a.call(t,{name:"dataId",hash:{},data:s}):a)+'">\n\t<input type="checkbox">\n\t<span class="setting-name">'+r(typeof(a=null!=(a=e.name||(null!=t?t.name:t))?a:l)==o?a.call(t,{name:"name",hash:{},data:s}):a)+"</span>\n\t"+(null!=(i=e.if.call(t,null!=t?t.plusOnly:t,{name:"if",hash:{},fn:this.program(1,s,0),inverse:this.noop,data:s}))?i:"")+"\n\t"+(null!=(i=e.if.call(t,null!=t?t.beta:t,{name:"if",hash:{},fn:this.program(3,s,0),inverse:this.noop,data:s}))?i:"")+'\n\t<span class="toggle-slider">\n\t\t<svg class="toggle-switch" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="50"/></svg>\n\t</span>\n\t'+(null!=(i=e.if.call(t,null!=t?t.message:t,{name:"if",hash:{},fn:this.program(5,s,0),inverse:this.noop,data:s}))?i:"")+"\n\t"+(null!=(i=e.if.call(t,null!=t?t.configLabel:t,{name:"if",hash:{},fn:this.program(7,s,0),inverse:this.noop,data:s}))?i:"")+"\n\t\x3c!-- TODO combine nicknameConfigLable w configLabel --\x3e\n\t"+(null!=(i=e.if.call(t,null!=t?t.nicknameConfigLabel:t,{name:"if",hash:{},fn:this.program(9,s,0),inverse:this.noop,data:s}))?i:"")+"\n</li>\n"},useData:!0}),l.templates.help=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,s){return'<h3>Help</h3>\n\n<h5>QUICK TIPS</h5>\n<div class="quick-tips-wrapper">\n\t<div class="quick-tips"></div>\n\t<button class="next-quick-tip button">Next tip</button>\n</div>\n\n<h5>HELPFUL GUIDES</h5>\n<div class="help-guides">\n\t<p><a href="https://get.momentumdash.help/hc/en-us/articles/115007780748-About-Momentum" target="_blank">About Momentum</a></p>\n\t<p><a href="https://get.momentumdash.help/hc/en-us/articles/360019099073-Navigating-Momentum" target="_blank">Navigating Momentum</a></p>\n\t<p><a href="https://get.momentumdash.help/hc/en-us/articles/115015748548-Momentum-Plus-Overview" target="_blank">Momentum Plus Overview</a></p>\n\t<p><a href="https://get.momentumdash.help/hc/en-us/articles/360012256874-Hotkeys-Keyboard-shortcuts" target="_blank">Hotkeys</a></p>\n</div>\n\n<h5>FOR MORE HELPFUL GUIDES AND TIPS</h5>\n<p><a href="https://get.momentumdash.help/hc/en-us" target="_blank">Visit our Help Center</a></p>\n'},useData:!0}),l.templates.loading=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,s){return'<div class="settings-loading">\n\t<p class="settings-loading-loading-message"><i class="loading-icon"></i>Loading...</span></p>\n\t<p class="settings-loading-error-message">We\'re having trouble loading these settings.</p>\n\t<span class="button button-retry">Retry</span>\n</div>\n'},useData:!0}),l.templates.main=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,s){return'<div class="app settings-app">\n\t<ul id="nav-menu" class="settings-nav" data-test="nav-menu"></ul>\n\t<div class="settings-view-container" data-test="settings-view-container"></div>\n</div>\n'},useData:!0}),l.templates.navmenu=Handlebars.template({1:function(t,e,n,s){var i,a=e.helperMissing,l="function",o=this.escapeExpression;return'\t<li data-navitem="'+o(typeof(i=null!=(i=e.id||(null!=t?t.id:t))?i:a)==l?i.call(t,{name:"id",hash:{},data:s}):i)+'" class="main-nav-item" data-test="nav-menu-'+o(typeof(i=null!=(i=e.id||(null!=t?t.id:t))?i:a)==l?i.call(t,{name:"id",hash:{},data:s}):i)+'">'+o(typeof(i=null!=(i=e.title||(null!=t?t.title:t))?i:a)==l?i.call(t,{name:"title",hash:{},data:s}):i)+"</li>\n"},3:function(t,e,n,s){var i,a,l=e.helperMissing,o="function",r=this.escapeExpression;return'\t<li data-navitem="'+r(typeof(a=null!=(a=e.id||(null!=t?t.id:t))?a:l)==o?a.call(t,{name:"id",hash:{},data:s}):a)+'" class="main-nav-item secondary '+(null!=(i=e.if.call(t,s&&s.first,{name:"if",hash:{},fn:this.program(4,s,0),inverse:this.noop,data:s}))?i:"")+" "+(null!=(i=e.if.call(t,null!=t?t.class:t,{name:"if",hash:{},fn:this.program(6,s,0),inverse:this.noop,data:s}))?i:"")+'" data-test="nav-menu-'+r(typeof(a=null!=(a=e.id||(null!=t?t.id:t))?a:l)==o?a.call(t,{name:"id",hash:{},data:s}):a)+'">'+r(typeof(a=null!=(a=e.title||(null!=t?t.title:t))?a:l)==o?a.call(t,{name:"title",hash:{},data:s}):a)+"</li>\n"},4:function(t,e,n,s){return" secondary-first"},6:function(t,e,n,s){var i;return this.escapeExpression("function"==typeof(i=null!=(i=e.class||(null!=t?t.class:t))?i:e.helperMissing)?i.call(t,{name:"class",hash:{},data:s}):i)},8:function(t,e,n,s){var i,a=e.helperMissing,l="function",o=this.escapeExpression;return'\t<div class="user u--no-transition">\n\t\t<div class="user-info" title="'+o(typeof(i=null!=(i=e.email||(null!=t?t.email:t))?i:a)==l?i.call(t,{name:"email",hash:{},data:s}):i)+'">\n\t\t\t<div class="user-avatar-wrapper">\n\t\t\t\t<div class="user-avatar"><img src="/img/gravatar_unknown.jpg"></div>\n\t\t\t\t<div class="user-avatar-hidden"><img src=""></div>\n\t\t\t\t<div class="user-badge-wrapper">\n\n\t\t\t\t\t<span class="badge plus-badge">PLUS</span>\n\t\t\t\t\t<span class="badge team-badge">TEAM</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<span class="name-wrapper">\n\t\t\t\t<span class="user-info-name">'+o(typeof(i=null!=(i=e.displayName||(null!=t?t.displayName:t))?i:a)==l?i.call(t,{name:"displayName",hash:{},data:s}):i)+'</span>\n\t\t\t\t<span class="anim-caret u--no-transition">\n\t\t\t\t\t<svg class="icon anim-caret-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52.16 11.75"><path d="M52.16,26.08A5.87,5.87,0,0,1,46.29,32H5.88A5.88,5.88,0,0,1,0,26.08H0a5.87,5.87,0,0,1,5.88-5.87H46.29a5.87,5.87,0,0,1,5.87,5.87Z" transform="translate(0 -20.21)"/></svg>\n\t\t\t\t\t<svg class="icon anim-caret-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52.16 11.75"><path d="M52.16,26.08A5.87,5.87,0,0,1,46.29,32H5.88A5.88,5.88,0,0,1,0,26.08H0a5.87,5.87,0,0,1,5.88-5.87H46.29a5.87,5.87,0,0,1,5.87,5.87Z" transform="translate(0 -20.21)"/></svg>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t</div>\n\t\t\t<div class="user-hidden">\n\t\t\t\t<ul class="user-nav">\n\t\t\t\t\t<li class="action action-profile">Profile</li>\n\t\t\t\t\t<li class="action action-logout">Log Out</li>\n\t\t\t\t</ul>\n\t\t\t<div class="user-close"></div>\n\t\t</div>\n\t</div>\n\n'},10:function(t,e,n,s){return'\t<div class="user login">\n\t\t<div class="login-button">\n\t\t\t<div class="login-title">Log In</div>\n\t\t\t<div class="login-description">Sync your account &amp; more!</div>\n\t\t</div>\n\t</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,s){var i;return(null!=(i=e.each.call(t,null!=(i=null!=t?t.menu:t)?i.navItems:i,{name:"each",hash:{},fn:this.program(1,s,0),inverse:this.noop,data:s}))?i:"")+(null!=(i=e.each.call(t,null!=(i=null!=t?t.menu:t)?i.secondaryNavItems:i,{name:"each",hash:{},fn:this.program(3,s,0),inverse:this.noop,data:s}))?i:"")+"\n"+(null!=(i=e.if.call(t,null!=t?t.loggedIn:t,{name:"if",hash:{},fn:this.program(8,s,0),inverse:this.program(10,s,0),data:s}))?i:"")},useData:!0}),l.templates.upgrade=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,s){var i;return'<div class="hero upgrade-hero">\n\t<style type="text/css">\n\t\t.upgrade-hero { padding-bottom: 30px; border-bottom: 1px solid #444; }\n\t\t.upgrade-hero h3 { margin-bottom: 6px; }\n\t\t.upgrade-hero .description { margin-bottom: 15px; opacity: 0.8; }\n\t\t.settings-upgrade .button { padding: 12px 30px; font-size: 95%; font-weight: 500; text-transform: uppercase; }\n\t</style>\n\n\t<h3>Momentum Plus is Here!</h3>\n\t<p class="description" style="margin-bottom: 15px; opacity: 0.8;" ">Level up your focus with customization, integrations, and new widgets.</p>\n\n\t<div class="login-needed">\n\t\t<span class="login-needed-title">Please log in</span>\n\t\t<span class="login-needed-desc">Go to <strong>General â†’ Login</strong>, then come back and try again. Thanks!</span>\n\t</div>\n\n\t<span class="button button-upgrade">Get Momentum Plus</span>\n\t<span class="special">Launch Special!<strong style="margin-left: 5px;"><i class="fa fa-sun-o"></i> 33% Off</strong></span>\n\t<span class="price-line"><span class="price">$1.99/month</span> or <span class="price">$19.99/year</span> (equal to 2 months free!)<br></span>\n</div>\n\n\n\n<div class="feature-list">\n\t<style type="text/css">\n\t\t.feature-list { margin-top: 30px; }\n\t\t.feature-list h4 { margin-bottom: 15px; font-size: 95%; opacity: 0.8; text-transform: uppercase; }\n\t\t.feature-list-icon { width: 40px; margin-top: -2px; float: left; font-size: 120%; text-align: center; }\n\t\t.feature-list-info { margin-left: 40px; margin-bottom: 20px; }\n\t\t.feature-list-info h5 { margin: 0 0 4px; font-size: 92%; opacity: 1; }\n\t\t.feature-list-info p { margin-top: 5px; font-size: 13px; line-height: 135%; opacity: 0.7; }\n\t</style>\n\n\n\n\t<div class="feature-list-icon"><i class="icon icon-check"></i></div>\n\t<div class="feature-list-info">\n\t\t<h5>Todo Integrations</h5>\n\t\t<p>Momentum Plus connects with your favorite task management services! See, update, and create new tasks from Trello, Todoist, Wunderlist, and Google Tasks.</p>\n\t</div>\n\n\n\t<div class="feature-list-icon"><i class="icon icon-check"></i></div>\n\t<div class="feature-list-info">\n\t\t<h5>Custom Background Photos</h5>\n\t\t<p>Light up your day every time you open a new tab. Add your own photos or choose from your favorites or past photos in Momentum.</p>\n\t</div>\n\n\n\t<div class="feature-list-icon"><i class="icon icon-check"></i></div>\n\t<div class="feature-list-info">\n\t\t<h5>Personalize Font and Color</h5>\n\t\t<p>Make Momentum your own by choosing a font and color that suits your personality. Incorporate your own style to motivate, inspire, and bring focus to your day.</p>\n\t</div>\n\n\n\t<div class="feature-list-icon"><i class="icon icon-check"></i></div>\n\t<div class="feature-list-info">\n\t\t<h5>Custom Quotes</h5>\n\t\t<p>Add your favourite quotes to maximize your inspiration. Set the quote of the day to anything you want, anytime.</p>\n\t</div>\n\n\n\t<div class="feature-list-icon"><i class="icon icon-check"></i></div>\n\t<div class="feature-list-info">\n\t\t<h5>Skip Photo/Quote</h5>\n\t\t<p>Not feeling the photo or quote of the day? No problem; a new one is just a refresh away. Cycle between five photos and five quotes per day.</p>\n\t</div>\n\n\n\t<div class="feature-list-icon"><i class="icon icon-check"></i></div>\n\t<div class="feature-list-info">\n\t\t<h5>Autofocus Mode</h5>\n\t\t<p>Set your priorities at the start of the day and Momentum will show you the one thing you need to focus on at a time. Check it off, and the next up todo becomes your focus.</p>\n\t</div>\n\n\n\t<div class="feature-list-icon"><i class="icon icon-check"></i></div>\n\t<div class="feature-list-info">\n\t\t<h5>Inbox, Today, and Done Lists</h5>\n\t\t<p>Keep your todo list clutter free with the Inbox list. Know exactly what you need to do for the day with the Today list. Follow up on what youâ€™ve completed with the Done list.</p>\n\t</div>\n\n\n\t<div class="feature-list-icon"><i class="icon icon-check"></i></div>\n\t<div class="feature-list-info">\n\t\t<h5>Priority Support</h5>\n\t\t<p>Plus subscribers can be assured that their messages, suggestions and requests will be answered promptly by a real human. Your satisfaction is of the utmost importance to us.</p>\n\t</div>\n\n\n\t<div class="feature-list-icon"><i class="icon icon-check"></i></div>\n\t<div class="feature-list-info">\n\t\t<h5>Early Access</h5>\n\t\t<p>Get exclusive early access to exciting new Momentum features. Have a say in the direction of the product. Next early release feature: Notes.</p>\n\t</div>\n\n\n\t<div class="feature-list-icon"><i class="icon icon-check"></i></div>\n\t<div class="feature-list-info">\n\t\t<h5>Support Momentum</h5>\n\t\t<p>Your subscription helps Momentum  Plus subscriptions help sustain Momentum and enable the addition of more features. Thank you for your support â€” we are incredibly grateful!</p>\n\t</div>\n</div>\n\n\n\n<div class="cta">\n\t<style type="text/css">\n\t\t.settings-upgrade .cta { margin: 50px 0 70px; padding: 25px 10px 10px; border-top: 1px solid #444; border-bottom: 1px solid #444; text-align: center; }\n\t\t.settings-upgrade .cta .pitch { margin: 0 0 19px; font-size: 125%; line-height: 135%; }\n\t\t.settings-upgrade .cta .button { margin-bottom: 0; }\n\t\t.settings-upgrade .link { margin: 3px 0 0; padding: 8px; display: inline-block; background: none !important; cursor: pointer; opacity: 0.5; text-decoration: none; -webkit-transition: all 0.1s ease; }\n\t\t.settings-upgrade .link:hover { opacity: 0.7; }\n\t</style>\n\n\t<p class="pitch">Upgrade to Momentum Plus today and turn<br>your potential into progress.</p>\n\n\t<div class="login-needed">\n\t\t<span class="login-needed-title">Please log in</span>\n\t\t<span class="login-needed-desc">Go to <strong>General â†’ Login</strong>, then come back and try again. Thanks!</span>\n\t</div>\n\n\t<span class="button button-upgrade">Get Momentum Plus</span><br>\n\t<a href="https://momentumdash.com/plus?'+this.escapeExpression("function"==typeof(i=null!=(i=e.campaignDetails||(null!=t?t.campaignDetails:t))?i:e.helperMissing)?i.call(t,{name:"campaignDetails",hash:{},data:s}):i)+'" class="link">Learn More</a>\n</div>\n\n\n\n<div class="faq">\n\t<style type="text/css">\n\t\t.settings-upgrade .faq { margin-top: 0; padding: 0 75px; font-size: 90%; opacity: 1; }\n\t\t.settings-upgrade .faq:first-child { margin-top: 0; }\n\t\t.settings-upgrade .faq:last-child { margin-bottom: 10px !important; }\n\n\t\t.settings-upgrade .faq-question { opacity: 0.9; }\n\t\t.settings-upgrade .faq-answer { opacity: 0.7; }\n\t</style>\n\t<p>\n\t\t<span class="faq-question">What are the available integrations?</span>\n\t\t<span class="faq-answer">Currently we integrate with Wunderlist, Google Tasks, Todoist, and Fitbit. Coming soon: Trello and Asana.\x3c!--Github, Google Analytics, Uservoice, Harvest.--\x3e</span>\n\t</p>\n\n\t<p>\n\t\t<span class="faq-question">I thought Momentum was free?</span>\n\t\t<span class="faq-answer">Momentum Free will always be free. We created Momentum Plus to bring more control and functionality to those who desire it, while still keeping the experience simple and focused.</span>\n\t</p>\n</div>'},useData:!0}),l.templates.upsell=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,s){var i,a=e.helperMissing,l="function",o=this.escapeExpression;return'<div class="right">\n\t<span class="button upsell-action">'+o(typeof(i=null!=(i=e.buttonText||(null!=t?t.buttonText:t))?i:a)==l?i.call(t,{name:"buttonText",hash:{},data:s}):i)+'</span>\n\t<span class="icon-wrapper hide"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212.982 212.982" class="icon"><path d="M131.804 106.491l75.936-75.936c6.99-6.99 6.99-18.323 0-25.312-6.99-6.99-18.322-6.99-25.312 0L106.491 81.18 30.554 5.242c-6.99-6.99-18.322-6.99-25.312 0-6.989 6.99-6.989 18.323 0 25.312l75.937 75.936-75.937 75.937c-6.989 6.99-6.989 18.323 0 25.312 6.99 6.99 18.322 6.99 25.312 0l75.937-75.937 75.937 75.937c6.989 6.99 18.322 6.99 25.312 0 6.99-6.99 6.99-18.322 0-25.312l-75.936-75.936z"/></svg></span>\n</div>\n<div class="available">Available on Plus</div>\n<div class="title">'+o(typeof(i=null!=(i=e.title||(null!=t?t.title:t))?i:a)==l?i.call(t,{name:"title",hash:{},data:s}):i)+'</div>\n<div class="description">'+o(typeof(i=null!=(i=e.description||(null!=t?t.description:t))?i:a)==l?i.call(t,{name:"description",hash:{},data:s}):i)+"</div>\n"},useData:!0}),l.templates.whatsnew=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,s){return'<div class="settings-header">\n\t<h3>Whatâ€™s New</h3>\n</div>\n\n<div class="whatsnew-body">\n</div>\n'},useData:!0}),l.views.SettingsPanel=Backbone.View.extend({initialize:function(){},render:function(){return this.$el.html(this.template({})),this},close:function(){this.remove(),this.unbind()}}),l.views.About=l.views.SettingsPanel.extend({attributes:{id:"settings-about",class:"settings-view settings-about"},template:l.templates.about,panelid:"about",events:{"dblclick #momo-version":"revealUuid","dblclick .about-logo":"logoDblClicked"},render:function(){var t={version:d.globals.version};return this.$el.html(this.template(t)),this},revealUuid:function(t){t.preventDefault(),t.stopPropagation(),this.$el.find(".made").html(localStorage.client_uuid)},logoDblClicked:function(t){t.stopPropagation(),i(".settings").first().toggleClass("infinispin",d.settingsManager.toggleInfinispin())}}),l.views.ColorPicker=Backbone.View.extend({template:l.templates["color-picker"],active:!1,attributes:{class:"color-picker"},events:{"click .swatch":"handleClick"},initialize:function(t,e,n){this.listenTo(d,"globalEvent:settingsclick",this.settingsClick),this.listenTo(d,"globalEvent:esc globalEvent:click globalEvent:toggle",this.dismiss),this.settingName=t,this.optionValue=e,this.options=n,this.options.ignoreClick&&delete this.events["click .swatch"]},render:function(){this.$el.html(this.template()),this.delegateEvents(),this.$swatch=this.$el.find(".swatch").first();var t=d.models.themeManager.getThemeColourRGBA(this.settingName);return this.$swatch.css({backgroundColor:t}),this.picker&&(this.$picker=this.picker.render().$el,this.$el.append(this.$picker)),this},scrollIntoViewElement:function(){return!!(this.$picker&&this.$picker.is(":visible")&&this.active)&&this.$picker.find(".cp-color-picker").first()[0]},settingsClick:function(t){if(!(0<i(t.target).closest(".cp-color-picker").length)){var e=i(t.currentTarget).data("option-value");e&&e==this.optionValue||this.dismiss()}},setActive:function(){this.active=!0},setInactive:function(){this.active=!1},dismiss:function(t){this.$picker&&(t&&t.target&&!i.contains(this.$picker[0],t.target)&&(this.$picker.hide(),this.$el.closest(".toggle-option").removeClass("color-picker-active")),this.$picker.is(":visible")&&d.models.themeManager.saveThemeColour())},ignoreClickEvent:function(t){return"swatch"!=t.className&&"color-picker"!=t.className},handleClick:function(t,e){if(this.active||e){t.stopPropagation();var s=this;if(this.picker)this.$picker&&(this.$picker.mToggle("block"),this.$el.closest(".toggle-option").toggleClass("color-picker-active"),this.$picker.is(":visible")?(this.picker.setSizes(),this.picker.preRender(!0)):d.models.themeManager.saveThemeColour());else{var n={light:"#fff",dark:"#fff",renderCallback:function(t){if(t){var e=t.colors,n=d.models.themeManager.toRgbA(e);s.$swatch.css({backgroundColor:n,color:.22<e.RGBLuminance?"#222":"#ddd"}),d.models.themeManager.setColorValues(s.settingName,e)}}},i=d.models.themeManager.getThemeColourRGBA(this.settingName);i&&(n.color=i),this.picker=new l.views.ColorPickerPopup(n),this.$picker=this.picker.render().$el,this.$el.closest(".toggle-option").toggleClass("color-picker-active"),this.$el.append(this.$picker),this.picker.setSizes(),this.picker.preRender(!0)}}},close:function(){d.models.themeManager.saveThemeColour(),this.dismiss()}}),l.views.ColorPickerPopup=Backbone.View.extend({template:l.templates["color-picker-popup"],events:{"mousedown .cp-xy-slider,.cp-z-slider,.cp-alpha":"mouseDown"},initialize:function(t){this._color=this.color=new Colors(t),this._options=this._color.options,this._GPU=!1,this._css="",this._pointermove="touchmove.tcp mousemove.tcp pointermove.tcp",this._pointerup="touchend.tcp mouseup.tcp pointerup.tcp"},render:function(){return this.$el.html(this.template()),this.delegateEvents(),this._$z_slider=this.$el.find(".cp-z-slider").first(),this._$xy_slider=this.$el.find(".cp-xy-slider").first(),this._$xy_cursor=this.$el.find(".cp-xy-cursor").first(),this._$z_cursor=this.$el.find(".cp-z-cursor").first(),this._$alpha=this.$el.find(".cp-alpha").first(),this._$alpha_cursor=this.$el.find(".cp-alpha-cursor").first(),this.setSizes(),this.preRender(),this.renderedOnce=!0,this},setSizes:function(){this._$alpha._width=this._$alpha.width(),this._$xy_slider._width=this._$xy_slider.width(),this._$xy_slider._height=this._$xy_slider.height(),this._$z_slider._height=this._$z_slider.height()},resolveEventType:function(t){return(t=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0]:t).originalEvent?t.originalEvent:t},findElement:function(t){return i(t.find(this._options.doRender)[0]||t[0])},mouseDown:function(t){var e=this;t.stopPropagation(),this._$trigger=i(t.currentTarget),this.setSizes();var n=t.currentTarget.className.replace(/cp-(.*?)(?:\s*|$)/,"$1").replace("-","_");1<(t.button||t.which)||(t.preventDefault&&t.preventDefault(),t.returnValue=!1,this._$trigger._offset=this._$trigger.offset(),(n="xy_slider"===n?this.xy_slider:"z_slider"===n?this.z_slider:this.alpha).call(this,t),this.preRender(),this.$el.on(this._pointerup,function(t){e.$el.off(".tcp")}).on("mouseleave.tcp",function(t){n.call(e,t),e.preRender(),e.$el.off(".tcp")}).on(this._pointermove,function(t){n.call(e,t),e.preRender()}))},xy_slider:function(t){var e=this.resolveEventType(t),n=e.pageX-this._$trigger._offset.left,s=e.pageY-this._$trigger._offset.top;this._color.setColor({s:n/this._$xy_slider._width*100,v:100-s/this._$xy_slider._height*100},"hsv")},z_slider:function(t){var e=this.resolveEventType(t).pageY-this._$trigger._offset.top;this._color.setColor({h:360-e/this._$z_slider._height*360},"hsv")},alpha:function(t){var e=(this.resolveEventType(t).pageX-this._$trigger._offset.left)/this._$alpha._width;this._color.setColor({},"rgb",e)},preRender:function(t){colors=this._color.colors,hueRGB=colors.hueRGB,RGB=colors.RND.rgb,HSL=colors.RND.hsl,dark=this._options.dark,light=this._options.light,colorText=this._color.toString(this._color._colorMode,this._options.forceAlpha),HUEContrast=.22<colors.HUELuminance?dark:light,alphaContrast=.22<colors.rgbaMixBlack.luminance?dark:light,h=(1-colors.hsv.h)*this._$z_slider._height,s=colors.hsv.s*this._$xy_slider._width,v=(1-colors.hsv.v)*this._$xy_slider._height,a=colors.alpha*this._$alpha._width,translate3d=this._GPU?"translate3d":"",hasNoValue=this._$trigger?(triggerValue=this._$trigger[0].value,this._$trigger[0].hasAttribute("value")&&""===triggerValue&&void 0!==t):!(triggerValue=null),this._$xy_slider._css={backgroundColor:"rgb("+hueRGB.r+","+hueRGB.g+","+hueRGB.b+")"},this._$xy_cursor._css={transform:translate3d+"("+s+"px, "+v+"px, 0)",left:this._GPU?"":s,top:this._GPU?"":v,borderColor:.22<colors.RGBLuminance?dark:light},this._$z_cursor._css={transform:translate3d+"(0, "+h+"px, 0)",top:this._GPU?"":h,borderColor:"transparent "+HUEContrast},this._$alpha._css={background:"linear-gradient(to left,#"+colors.HEX+",rgba(0,0,0,0))"},this._$alpha_cursor._css={transform:translate3d+"("+a+"px, 0, 0)",left:this._GPU?"":a,borderColor:alphaContrast+" transparent"},this.renderInternal(t)},renderInternal:function(t){this._$xy_slider.css(this._$xy_slider._css),this._$xy_cursor.css(this._$xy_cursor._css),this._$z_cursor.css(this._$z_cursor._css),this._$alpha.css(this._$alpha._css),this._$alpha_cursor.css(this._$alpha_cursor._css),this._options.doRender&&this._$trigger.css(this._$trigger._css),this._options.renderCallback.call(null,this._color,this._$trigger,"boolean"==typeof t?t:void 0)}}),d.views.Gravatar=Backbone.View.extend({className:"avatar",tagName:"img",render:function(){var t=this.options.email,e=this.options.size,n=this.$el.attr({src:"https://www.gravatar.com/avatar/"+md5(t)+"?s="+e+"&d=mm"});return this.$el.html(n),this}}),l.views.Help=l.views.SettingsPanel.extend({attributes:{id:"settings-help",class:"settings-view settings-help"},template:l.templates.help,panelid:"help",events:{"click .next-quick-tip":"showRandomTip"},initialize:function(){this.quickTips=["Momentumâ€™s Photo, Quote & Mantra change automatically at 4am each day.","You can change between a 12 hour or 24 hour clock at the bottom of the General settings.","Double-clicking your display name will let you edit it.",'Click the current temperature, select the <i class="icon-ellipsis more-icon"></i> options and then click the Metric units switch to change between Â°F or Â°C.']},render:function(){return this.$el.html(this.template({})),this.$quickTips=i(this.$el.find(".quick-tips")[0]),this.showRandomTip(),this},showRandomTip:function(t){var e=this,n="helpTipsIndex",s=localStorage.getItem(n);(s=null==s?0:parseInt(s))>this.quickTips.length-1&&(s=0),this.$quickTips.addClass("fadein"),this.$quickTips.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(t){e.$quickTips.removeClass("fadein")}),this.$quickTips.html(this.quickTips[s]),localStorage.setItem(n,s+1)}}),l.views.Loading=l.views.SettingsPanel.extend({attributes:{id:"settings-loading",class:"settings-view settings-loading"},template:l.templates.loading,panelid:"loading",events:{"click .button-retry":"retryClicked"},render:function(){if(!this.renderedOnce){this.renderedOnce=!0;this.$el.html(this.template({})),this.$errorMessage=this.$(".settings-loading-error-message"),this.$retryButton=this.$(".button-retry"),this.$loading=this.$(".settings-loading-loading-message")}return this.renderDisplayState(),this},renderDisplayState:function(){if(this.displayOptions){var t=this.displayOptions;if(t.error)return this.$errorMessage.text(t.error),this.$errorMessage.css("display","block"),this.$retryButton.css("display","inline-block"),void this.$loading.hide()}this.$loading.css("display","block"),this.$errorMessage.hide(),this.$retryButton.hide()},setDisplayOptions:function(t){this.displayOptions=t||null},retryClicked:function(t){if(t.stopPropagation(),this.displayOptions&&this.displayOptions.retryInfo){var e=this.displayOptions.retryInfo,n=e.options||{};n.section=e.id,d.commandManager.execute("settings.display",null,n)}}}),l.views.MainSettings=Backbone.View.extend({attributes:{class:"app-wrapper nipple nipple-bottom-left"},template:l.templates.main,events:{"click .hide":"hideSettings"},detailsShown:!1,initialize:function(){this.subViews=[],this.renderedOnce=!1,this.visible=!1},render:function(){if(!this.visible)return this;if(this.paneRendered||(this.$el.html(this.template()),this.$popup=this.$(".app-wrapper"),this.$container=this.$(".settings-view-container"),this.paneRendered=!0),!this.cssLoaded)return this;this.renderedOnce||(this.navMenu=new l.views.NavMenu({el:this.$("#nav-menu")}),this.listenTo(this.navMenu,"navItemClicked",this.navItemClicked),this.renderedOnce=!0,this.visible||this.$el.hide());return this.renderActivePanel(),this},renderActivePanel:function(t){this.activePanel&&this.cssLoaded&&this.renderedOnce&&(this.activePanel.render(t).$el.detach().appendTo(this.$container),this.$popBody=this.$container.children(":first"),d.trigger("settings:panel:visible"))},navItemClicked:function(t){if(this.settingsUpsellShowing()&&this.upsellView.hideUpsell(),t!==this.activePanelId){var e=this.getNavItem(t);e&&e.cmd&&e.cmdonly?(this.setActiveNavItem(t),d.commandManager.ensureCommandLoaded(e.cmd,function(){e.hide&&d.commandManager.execute("settings.hide"),d.commandManager.execute(e.cmd,e.options)},function(){},function(t){})):this.activateSection(t,{source:"nav-"+t})}},toggleVisible:function(){this.visible?this.hideSettings():this.showSettings()},showSettings:function(t){var e=this;if(!this.cssLoaded&&!this.cssLoading){this.cssLoading=!0;var n=i('<link type="text/css" href="css/settings.css" rel="stylesheet" />');n.on("load",function(){e.cssLoaded=!0,e.render(),e.showSection(t)}),i("head").append(n)}this.visible=!0,d.trigger("globalEvent:toggle:bottom-left",this),!e.cssLoaded||this.paneRendered&&this.renderedOnce||this.render(),d.trigger("settings:visible"),d.trigger("notification:hide"),this.cssLoaded&&this.showSection(t)},hideSettings:function(t){if(this.$el.is(":visible")){t&&t.preventDefault(),this.visible=!1,d.trigger("settings:hidden"),this.$popup.removeClass("show-fade-in");var e=this;setTimeout(function(){e.$popup.removeClass("show"),this.activePanel&&this.activePanel.close(),this.navMenu&&this.navMenu.closeUser()},200)}},showSection:function(t){t&&t.section?this.activateSection(t.section,t):this.activateSection(this.activePanelId&&"loading"!=this.activePanelId?this.activePanelId:"general")},getNavItem:function(t){var e=d.settingsManager.getNavItems(),n=_.findWhere(e.navItems,{id:t});return n=n||_.findWhere(e.secondaryNavItems,{id:t})},getPanel:function(t){var e=d.settingsManager.getPanelItems();return _.findWhere(e,{id:t})},showLoadingPanel:function(t){this.loadingPanel||(this.loadingPanel=new l.views.Loading),"loading"!=this.activePanelId&&this.setActivePanel(this.loadingPanel,"loading",null),this.loadingPanel.setDisplayOptions(t),this.renderActivePanel()},setActivePanel:function(t,e,n){t&&(this.activePanel&&this.activePanel.close(),this.activePanel=t,this.activePanelId=e,this.activePanelOptions=n,this.$container.scrollTop(0))},setActiveNavItem:function(t){i(".main-nav-item").removeClass("active");var e=this.getNavItem(t);(e=e||this.getPanel(t))&&e.section?i('li[data-navitem="'+e.section+'"]').addClass("active"):i('li[data-navitem="'+t+'"]').addClass("active")},activateSection:function(e,n){var s=this;if(e){n&&n.nav?this.setActiveNavItem(n.nav):this.setActiveNavItem(e);var t=this.getNavItem(e);t=t||this.getPanel(e);var i=null,a=!1,l=!1,o=!1;if(t&&t.cmd)d.commandManager.ensureCommandLoaded(t.cmd,function(){a=!0,i=d.commandManager.execute(t.cmd,n),s.setActivePanel(i,e,n),s.renderActivePanel(n)},function(){l||a||(l=!0,setTimeout(function(){o||a||s.showLoadingPanel()},400))},function(t){o=l=!0,s.showLoadingPanel({error:"We were unable to load settings.",retryInfo:{id:e,options:n}})});else{if(!(i=_.findWhere(this.subViews,{panelid:e}))){var r=e.charAt(0).toUpperCase()+e.slice(1),c=d.views.settings.panels[r];c&&(i=new c(n))}this.setActivePanel(i,e,n),this.renderActivePanel(n)}}},settingsUpsellShowing:function(){return this.upsellView&&this.upsellView.showing},showUpsell:function(t){var e=this.settingsUpsellShowing();if(e){if(this.upsellView.options.title===t.title)return!0;this.upsellView.hideUpsell()}if(t.template=l.templates.upsell,this.upsellView=new d.views.upsell.Message(t),this.$el.find(".settings-view-container").prepend(this.upsellView.render().$el),e){var n=this;setTimeout(function(){n.upsellView.show()},350)}else this.upsellView.show()}}),l.views.NavMenu=Backbone.View.extend({template:l.templates.navmenu,events:{"click .main-nav-item":"onClickNavItem","click .user-info":"toggleUserPanel","click .action-profile":"accountClicked","click .action-logout":"logoutClicked","click .user-close":"closeUser","click .login-button":"loginClicked"},initialize:function(){var e=this;this.listenTo(d.settingsManager,"navItemsChanged",this.render),this.listenTo(d.models.customization,"change:displayname",this.onChangeDisplayname),this.listenTo(d,"settings:hidden",this.closeUser),this.render(),this.$el.closest(".app").on("click",function(t){i.contains(e.$user[0],t.target)||t.target===e.$user[0]||e.closeUser()})},render:function(){var t=localStorage.getItem("email"),e=d.isLoggedIn(),n={displayName:d.models.customization.get("displayname"),email:t,loggedIn:e,menu:d.settingsManager.getNavItems()};this.$el.html(this.template(n)),this.$user=this.$(".user"),this.$userInfoName=this.$(".user-info-name"),this.$userHidden=this.$(".user-hidden"),e&&this.renderGravatar(t),d.conditionalFeatures.featureEnabled("plus")&&!d.conditionalFeatures.featureEnabled("team")&&this.$user.addClass("has-plus");var s=this.$el.clone();return s.css("visibility","hidden"),s.css("position","absolute"),document.body.appendChild(s[0]),this.$user.css("transform","translateY("+s.find(".user-hidden").height()+"px)"),s.remove(),this},renderGravatar:function(t){this.$userAvatarImg=this.$(".user-avatar img"),this.$userAvatarHidden=this.$(".user-avatar-hidden");var e=new d.views.Gravatar({email:t,size:50});this.$userAvatarHidden.html(e.render().$el);var n=this;setTimeout(function(){n.$(".user-avatar-hidden img").one("load",function(){n.$userAvatarImg.attr("src",i(this).attr("src"))})},0)},onClickNavItem:function(t){var e=i(t.currentTarget).data("navitem");this.trigger("navItemClicked",e)},toggleUserPanel:function(){this.$user.removeClass("u--no-transition"),this.$(".anim-caret").removeClass("u--no-transition"),this.$user.hasClass("open")?this.$user.css("transform","translateY("+this.$userHidden.height()+"px)"):this.$user.css("transform","translateY(0)"),this.$user.toggleClass("open")},accountClicked:function(t){t.preventDefault(),t.stopPropagation(),i(t.currentTarget).html("Launchingâ€¦"),i.ajax({type:"POST",beforeSend:setMomentumAuthHeader,data:JSON.stringify({medium:"account"}),url:d.globals.urlRootApi+"login/onetime"}).done(function(t){t&&t.otp&&t.email&&window.open(d.globals.urlRootAccount+"onetime?email="+encodeURIComponent(t.email)+"&otp="+encodeURIComponent(t.otp),"_blank")}).fail(function(t,e){}).always(function(){i(t.currentTarget).html("Profile")})},logoutClicked:function(t){t.preventDefault(),t.stopPropagation(),i(".action-logout").addClass("action-logout-disabled").text("Logging outâ€¦"),d.sendEvent("Settings","Logout","Clicked"),d.commandManager.execute("logout")},closeUser:function(){this.$user.css("transform","translateY("+this.$userHidden.height()+"px)").removeClass("open")},loginClicked:function(t){t.preventDefault(),t.stopPropagation(),d.sendEvent("Settings","Login","Clicked"),d.commandManager.execute("settings.hide"),d.commandManager.execute("account.login")},onChangeDisplayname:function(){this.$userInfoName.text(d.models.customization.get("displayname"))}}),l.views.Whatsnew=l.views.SettingsPanel.extend({attributes:{id:"whats-new",class:"settings-view whats-new"},template:l.templates.whatsnew,panelid:"whatsnew",events:{"click .action-back":"clickBack"},initialize:function(){d.sendEvent("Whats New","Show Whats New Panel")},render:function(){return this.$el.html(this.template({})),this.$whatsnew=i(this.$el.find(".whatsnew-body")[0]),this.$whatsnew.html('<span class="loading"><i class="loading-icon"></i>Loading...</span>'),this.fetchLatestWhatsNew(),this},fetchLatestWhatsNew:function(){var n=this;i.ajax({type:"GET",beforeSend:setMomentumAuthHeader,url:d.globals.urlRootApi+"settings/whatsnew"}).done(function(t){t.html&&n.$whatsnew.html(t.html)}).fail(function(t,e){n.$el.html(n.template({}))})}}),l.commands.SettingsColorPicker=d.models.Command.extend({defaults:{id:"settings.color.picker"},initialize:function(){this.views=[]},execute:function(t,e){if(e&&e.settingName){var n=_.findWhere(this.views,{settingName:e.settingName});return n||(n=new l.views.ColorPicker(e.settingName,t,e),this.views.push(n)),n}return null}}),l.commands.SettingsPanelHelp=d.models.Command.extend({defaults:{id:"settings.panels.help"},execute:function(){return l.styleLoaded||(l.styleLoaded=!0,l.styles.style()),new l.views.Help}}),l.commands.SettingsPanelWhatsNew=d.models.Command.extend({defaults:{id:"settings.panels.whatsnew"},execute:function(){return l.styleLoaded||(l.styleLoaded=!0,l.styles.style()),new l.views.Whatsnew}}),l.commands.SettingsPanelAbout=d.models.Command.extend({defaults:{id:"settings.panels.about"},execute:function(){return l.styleLoaded||(l.styleLoaded=!0,l.styles.style()),new l.views.About}}),l.commands.SettingsInitialize=d.models.Command.extend({defaults:{id:"settings.initialize"},execute:function(t){return l.views.mainSettings||(l.views.mainSettings=new l.views.MainSettings),t.prepend(l.views.mainSettings.$el),t.toggleClass("infinispin",d.settingsManager.infinispin()),l.views.mainSettings}}),l.commands.SettingsDisplay=d.models.Command.extend({defaults:{id:"settings.display"},execute:function(t,e){d.views.settingsPane.initializeSettings().then(function(){l.views.mainSettings&&l.views.mainSettings.showSettings(e)})}}),l.commands.SettingsDisplayUpgrade=d.models.Command.extend({defaults:{id:"settings.display.upgrade"},execute:function(t,e,n){var s="https://momentumdash.com/plus?utm_source=extension&utm_medium=organic";e&&e.source?s+="&utm_campaign="+encodeURIComponent(e.source):!e&&t&&t.source&&(s+="&utm_campaign="+encodeURIComponent(t.source)),d.commandManager.execute("window.open",null,{url:s})}}),l.commands.SettingsDisplayUpgradePanel=d.models.Command.extend({defaults:{id:"settings.display.upgrade.panel"},execute:function(t,e,n){l.views.mainSettings&&((e=e||{}).section="upgrade",l.views.mainSettings.showSettings(e))}}),l.commands.SettingsToggle=d.models.Command.extend({defaults:{id:"settings.toggle"},execute:function(t,e){e&&e.section?(l.views.mainSettings.toggleVisible(),l.views.mainSettings.visible&&l.views.mainSettings.showSettings(e)):l.views.mainSettings&&l.views.mainSettings.toggleVisible()}}),l.commands.SettingsHide=d.models.Command.extend({defaults:{id:"settings.hide"},execute:function(t,e){l.views.mainSettings&&l.views.mainSettings.hideSettings()}}),l.commands.SettingEnable=d.models.Command.extend({defaults:{id:"setting.enable"},execute:function(t,e){if(e&&e.name){var n={};n[e.name]=!!e.value,d.models.customization.set(n)}}}),l.commands.SettingsCacheUpgradeCopy=d.models.Command.extend({defaults:{id:"settings.cache.upgradecopy"},fetching:!1,fetched:!1,execute:function(t,e){var n=this;if((t||!d.conditionalFeatures.featureEnabled("plus"))&&(t||!n.fetching&&!n.fetched)){n.fetching=!0;var s=d.globals.urlRootApi+"settings/upgradecopy";e&&t?s=s+"?refresh=1&src="+encodeURIComponent(e):e?s=s+"?src="+encodeURIComponent(e):t&&(s+="?refresh=1"),i.ajax({type:"GET",beforeSend:setMomentumAuthHeader,url:s}).done(function(t){n.fetching=!1,t&&(n.fetched=!0,localStorage.setItem("cachedUpgradeCopy",JSON.stringify(t)),d.trigger("settings:upgradeCopyChanged"))}).fail(function(t,e){n.fetched=!1,n.fetching=!1}),setTimeout(function(){n.fetching&&(n.fetching=!1)},1e4)}}}),l.views.mainSettings=d.widgetManager.handover("settings",l.views.MainSettings,{region:"bottom-left",order:"prepend"}),l};m.addinManager&&m.addinManager.registerAddinFn("1d872cf4-953a-4743-8f5e-6785bba4bd19",fn_addin);